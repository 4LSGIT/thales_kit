

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Fading LED &mdash; SunFounder Thales Kit for Raspberry Pi Pico 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Warning Light" href="warning_light_arduino.html" />
    <link rel="prev" title="Hello LED" href="hello_led_arduino.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Thales Kit for Raspberry Pi Pico
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction_to_raspberry_pi_pico.html">Introduction to Raspberry Pi Pico</a></li>
<li class="toctree-l1"><a class="reference internal" href="What_is_included_in_this_kit.html">What is Included in This Kit</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="for_arduino_user.html">For Arduino User</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started_with_arduino.html">Getting Started with Arduino</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="projects_arduino.html">Projects</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hello_led_arduino.html">Hello LED</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fading LED</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wiring">Wiring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code">Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-it-works">How it works?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="warning_light_arduino.html">Warning Light</a></li>
<li class="toctree-l3"><a class="reference internal" href="table_lamp_arduino.html">Table Lamp</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="for_micropython_user.html">For MicroPython User</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Thales Kit for Raspberry Pi Pico</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="for_arduino_user.html">For Arduino User</a> &raquo;</li>
        
          <li><a href="projects_arduino.html">Projects</a> &raquo;</li>
        
      <li>Fading LED</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/fading_led_arduino.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fading-led">
<span id="fading-led-arduino"></span><h1>Fading LED<a class="headerlink" href="#fading-led" title="Permalink to this headline">¶</a></h1>
<p>In last projects, we have used only two output signals: high level and low level (or called 1 &amp; 0, ON &amp; OFF), which is called digital output.</p>
<p>However, in actual use, many devices do not simply ON/OFF to work, for example, adjusting the speed of the motor, adjusting the brightness of the desk lamp, and so on.
In the past, a slider that can adjust the resistance was used to achieve this goal, but this is always unreliable and inefficient.</p>
<p>Therefore, Pulse width modulation (PWM) has emerged as a feasible solution to such complex problems.
A digital output composed of a high level and a low level is called a pulse. The pulse width of these pins can be adjusted by changing the ON/OFF speed.</p>
<p>Simply put, when we are in a short period (such as 20ms, most people’s visual retention time),
Let the LED turn on, turn off, and turn on again, we won’t see it has been turned off, but the brightness of the light will be slightly weaker.
During this period, the more time the LED is turned on, the higher the brightness of the LED.
In other words, in the cycle, the wider the pulse, the greater the “electric signal strength” output by the microcontroller.
This is how PWM controls LED brightness (or motor speed).</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Pulse-width_modulation">Pulse-width modulation - Wikipedia</a></p></li>
</ul>
<p>There are some points to pay attention to when Pico uses PWM. Let’s take a look at this picture.</p>
<img alt="_images/pin_pic.png" src="_images/pin_pic.png" />
<p>Each GPIO pin of Pico supports PWM, but it actually has a total of 16 independent PWM outputs (instead of 30), distributed between GP0 to GP15 on the left, and the PWM output of the right GPIO is equivalent to the left copy.</p>
<p>What we need to pay attention to is to avoid setting the same PWM channel for different purposes during programming. (For example, GP0 and GP16 are both PWM_0A)</p>
<p>After understanding this knowledge, let us try to achieve the effect of Fading LED.</p>
<div class="section" id="wiring">
<h2>Wiring<a class="headerlink" href="#wiring" title="Permalink to this headline">¶</a></h2>
<img alt="_images/wiring_fading_led.png" src="_images/wiring_fading_led.png" />
<ul class="simple">
<li><p><a class="reference external" href="https://datasheets.raspberrypi.org/rp2040/rp2040-datasheet.pdf">RP2040 Datasheet</a></p></li>
</ul>
<ol class="arabic simple">
<li><p>Here we use the GP15 pin of the Pico board.</p></li>
<li><p>Connect one end (either end) of the 220 ohm resistor to GP15, and insert the other end into the free row of the breadboard.</p></li>
<li><p>Insert the anode lead of the LED into the same row as the end of the 220Ω resistor, and connect the cathode lead across the middle gap of the breadboard to the same row.</p></li>
<li><p>Connect the LED cathode to the negative power bus of the breadboard.</p></li>
<li><p>Connect the negative power bus to the GND pin of Pico.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The color ring of the 220 ohm resistor is red, red, black, black and brown.</p>
</div>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>When the program is running, the LED will alternate between gradually brightening and gradually dimming.</p>
<iframe src=https://create.arduino.cc/editor/sunfounder01/a1c395ff-13b3-4d1c-a71c-aed1e87f2862/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe></div>
<div class="section" id="how-it-works">
<h2>How it works?<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>As in the previous lesson, when using a pin, its input/output mode needs to be defined first.
Then we can write values to it, a function <a class="reference external" href="https://www.arduino.cc/reference/en/language/functions/analog-io/analogwrite/">analogWrite()</a> in <code class="docutils literal notranslate"><span class="pre">loop()</span></code> assigns ledPin a PWM wave (brightness)，which will add or decrease 5 for each cycle.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">analogWrite</span><span class="p">(</span><span class="n">ledPin</span><span class="p">,</span> <span class="n">brightness</span><span class="p">);</span>

<span class="c1">// change the brightness for next time through the loop:</span>
<span class="n">brightness</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">+</span> <span class="n">fadeAmount</span><span class="p">;</span>
</pre></div>
</div>
<p>Use an if statement to limit the range of <code class="docutils literal notranslate"><span class="pre">brightness</span></code> to 0-255, the <code class="docutils literal notranslate"><span class="pre">brightness</span></code> will accumulate from 0 to 255 and then decrement from 255 to 0, alternating repeatedly.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">brightness</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">brightness</span> <span class="o">&gt;=</span> <span class="mi">255</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fadeAmount</span> <span class="o">=</span> <span class="o">-</span><span class="n">fadeAmount</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://www.arduino.cc/reference/en/language/structure/comparison-operators/lessthanorequalto/">&lt;=</a></p></li>
<li><p><a class="reference external" href="https://www.arduino.cc/reference/en/language/structure/comparison-operators/greaterthanorequalto/">&gt;=</a></p></li>
<li><p><a class="reference external" href="https://www.arduino.cc/reference/en/language/structure/boolean-operators/logicalor/">||</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="warning_light_arduino.html" class="btn btn-neutral float-right" title="Warning Light" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hello_led_arduino.html" class="btn btn-neutral float-left" title="Hello LED" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>