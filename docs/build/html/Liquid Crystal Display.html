

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Liquid Crystal Display &mdash; SunFounder Thales Kit for Raspberry Pi Pico 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RGB LED Strip" href="RGB LED Strip.html" />
    <link rel="prev" title="LED Segment Display" href="LED Segment Display.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Thales Kit for Raspberry Pi Pico
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction to Raspberry Pi Pico.html">Introduction to Raspberry Pi Pico</a></li>
<li class="toctree-l1"><a class="reference internal" href="What is MicroPython.html">What is MicroPython?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Thonny Python IDE.html">Thonny Python IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="Your First MicroPython Program.html">Your First MicroPython Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroPython Basic Syntax.html">MicroPython Basic Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="Components Introduction.html">Components Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Lesson.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="First program! Hello, LED!.html">Hello, LED!</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello, Breadboard!.html">Hello, Breadboard!</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reading button values.html">Reading Button Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reaction Game.html">Reaction Game</a></li>
<li class="toctree-l2"><a class="reference internal" href="Traffic light.html">Traffic light</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello, Transistor!.html">Two Kinds of Transistors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Intruder Alarm.html">Intruder Alarm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fading LED.html">Fading LED</a></li>
<li class="toctree-l2"><a class="reference internal" href="Colorful Light.html">Colorful Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom tone.html">Custom tone</a></li>
<li class="toctree-l2"><a class="reference internal" href="Swinging Servo.html">Swinging Servo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Turn the knob.html">Turn the knob</a></li>
<li class="toctree-l2"><a class="reference internal" href="Thermometer.html">Thermometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Light Theremin.html">Light Theremin</a></li>
<li class="toctree-l2"><a class="reference internal" href="Microchip - 74HC595.html">Microchip - 74HC595</a></li>
<li class="toctree-l2"><a class="reference internal" href="LED Segment Display.html">LED Segment Display</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Liquid Crystal Display</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wiring">Wiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it works?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-more">What more?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="RGB LED Strip.html">RGB LED Strip</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Thales Kit for Raspberry Pi Pico</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Lesson.html">Lessons</a> &raquo;</li>
        
      <li>Liquid Crystal Display</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Liquid Crystal Display.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="liquid-crystal-display">
<h1>Liquid Crystal Display<a class="headerlink" href="#liquid-crystal-display" title="Permalink to this headline">¶</a></h1>
<p>LCD1602 is a character type liquid crystal display, which can display 32 (16*2) characters at the same time.</p>
<p>As we all know, though LCD and some other displays greatly enrich the man-machine interaction, they share a common weakness. When they are connected to a controller, multiple IOs will be occupied of the controller which has no so many outer ports. Also it restricts other functions of the controller. Therefore, LCD1602 with an I2C bus is developed to solve the problem.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/I2C">Inter-Integrated Circuit - Wikipedia</a></p></li>
</ul>
<p>I2C(Inter-Integrated Circuit) bus is a very popular and powerful bus for communication between a master device (or master devices) and a single or multiple slave devices.
I2C main controller can be used to control IO expander, various sensors, EEPROM, ADC/DAC and so on.
All of these are controlled only by the two pins of host, the serial data (SDA) line and the serial clock line(SCL).</p>
<p>这两个Pin这些必须连接到微控制器的特定引脚才可以运行。在Pico中有两对I2C通信接口，被标记为I2C0与I2C1，如下图。</p>
<img alt="_images/pin_pic2.png" src="_images/pin_pic2.png" />
<p>在这里我们将使用I2C0来控制LCD1602，显示文本。</p>
<div class="section" id="wiring">
<h2>Wiring<a class="headerlink" href="#wiring" title="Permalink to this headline">¶</a></h2>
<img alt="_images/wiring_lcd.png" src="_images/wiring_lcd.png" />
<ol class="arabic simple">
<li><p>将LCD的VCC连接Pico的VBUS。</p></li>
<li><p>将LCD的GND连接Pico的GND。</p></li>
<li><p>将LCD的SDA连接Pico的GP0，也就是I2C0 SDA。</p></li>
<li><p>将LCD的SCL连接Pico的GP1，也就是I2C0 SCL。</p></li>
</ol>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>每一个I2C设备都拥有独特的地址、需要传入独特的指令来运行。这会需要用户查看其 datasheet 才能完全弄懂。这拥有一定的门槛。</p>
<p>但是幸运的是，在互联网上有许多人将一些通用的模块封装成library，以便于我们可以直接使用。
以下是Sunfounder封装好的lcd1602的library。</p>
<p>你需要将其存入Pico，将其命名为 <strong>lcd1602.py</strong> 作为library使用。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">LCD</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">addr</span><span class="o">=</span><span class="mi">63</span><span class="p">,</span> <span class="n">blen</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">sda</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">scl</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bus</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">sda</span><span class="o">=</span><span class="n">sda</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">scl</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mi">400000</span><span class="p">)</span>
        <span class="c1">#print(self.bus.scan())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addr</span> <span class="o">=</span> <span class="n">addr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blen</span> <span class="o">=</span> <span class="n">blen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x33</span><span class="p">)</span> <span class="c1"># Must initialize to 8-line mode at first</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x32</span><span class="p">)</span> <span class="c1"># Then initialize to 4-line mode</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x28</span><span class="p">)</span> <span class="c1"># 2 Lines &amp; 5*7 dots</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x0C</span><span class="p">)</span> <span class="c1"># Enable display without cursor</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span> <span class="c1"># Clear Screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bus</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">([</span><span class="mh">0x08</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">write_word</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blen</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">|=</span> <span class="mh">0x08</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">&amp;=</span> <span class="mh">0xF7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bus</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">([</span><span class="n">temp</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
        <span class="c1"># Send bit7-4 firstly</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">cmd</span> <span class="o">&amp;</span> <span class="mh">0xF0</span>
        <span class="n">buf</span> <span class="o">|=</span> <span class="mh">0x04</span>               <span class="c1"># RS = 0, RW = 0, EN = 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>
        <span class="n">buf</span> <span class="o">&amp;=</span> <span class="mh">0xFB</span>               <span class="c1"># Make EN = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>

        <span class="c1"># Send bit3-0 secondly</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmd</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span>
        <span class="n">buf</span> <span class="o">|=</span> <span class="mh">0x04</span>               <span class="c1"># RS = 0, RW = 0, EN = 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>
        <span class="n">buf</span> <span class="o">&amp;=</span> <span class="mh">0xFB</span>               <span class="c1"># Make EN = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="c1"># Send bit7-4 firstly</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0xF0</span>
        <span class="n">buf</span> <span class="o">|=</span> <span class="mh">0x05</span>               <span class="c1"># RS = 1, RW = 0, EN = 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>
        <span class="n">buf</span> <span class="o">&amp;=</span> <span class="mh">0xFB</span>               <span class="c1"># Make EN = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>

        <span class="c1"># Send bit3-0 secondly</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span>
        <span class="n">buf</span> <span class="o">|=</span> <span class="mh">0x05</span>               <span class="c1"># RS = 1, RW = 0, EN = 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>
        <span class="n">buf</span> <span class="o">&amp;=</span> <span class="mh">0xFB</span>               <span class="c1"># Make EN = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_word</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span> <span class="c1"># Clear Screen</span>

    <span class="k">def</span> <span class="nf">openlight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># Enable the backlight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bus</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addr</span><span class="p">,</span><span class="nb">bytearray</span><span class="p">([</span><span class="mh">0x08</span><span class="p">]))</span>
        <span class="c1"># self.bus.close()</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># Move cursor</span>
        <span class="n">addr</span> <span class="o">=</span> <span class="mh">0x80</span> <span class="o">+</span> <span class="mh">0x40</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>

        <span class="k">for</span> <span class="nb">chr</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="nb">chr</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="c1">#print(&quot;message: %s&quot;%text)</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0xC0</span><span class="p">)</span> <span class="c1"># next line</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">))</span>
</pre></div>
</div>
<p>然后，新建一个new file，在这个文件里调用方才储存好的lcd1602 library。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lcd1602</span> <span class="kn">import</span> <span class="n">LCD</span>
<span class="kn">import</span> <span class="nn">utime</span>

<span class="n">lcd</span> <span class="o">=</span> <span class="n">LCD</span><span class="p">()</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot; Hello!</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">lcd</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;    Sunfounder!&quot;</span>
<span class="n">lcd</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lcd</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<p>程序运行后，你将能看到LCD依次出现两行文字，随后消失。</p>
</div>
<div class="section" id="how-it-works">
<h2>How it works?<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>在lcd1602 library中，我们将lcd1602的相关功能集成到了LCD类中。</p>
<p>你可以用以下语句来使用lcd1602.</p>
<p>import lcd1602 library</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lcd1602</span> <span class="kn">import</span> <span class="n">LCD</span>
</pre></div>
</div>
<p>声明一个LCD类的对象，命名为lcd。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lcd</span> <span class="o">=</span> <span class="n">LCD</span><span class="p">()</span>
</pre></div>
</div>
<p>这句指令会将文字显示在lcd中，需要注意的是，其argument必须是字符串类型，如果我们想要传入integer或者float，必须使用强制转化语句 <code class="docutils literal notranslate"><span class="pre">str()</span></code>。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lcd</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</pre></div>
</div>
<p>如果多次调用该语句，lcd会将这几次调用的文字叠加，直到超出显示范围。这就需要用到以下语句clear the display。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lcd</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="what-more">
<h2>What more?<a class="headerlink" href="#what-more" title="Permalink to this headline">¶</a></h2>
<p>我们可以结合thermistor和LCD1602，制作一个室温计。</p>
<img alt="_images/wiring_lcd_2.png" src="_images/wiring_lcd_2.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lcd1602</span> <span class="kn">import</span> <span class="n">LCD</span>
<span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">utime</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">thermistor</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">ADC</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
<span class="n">lcd</span> <span class="o">=</span> <span class="n">LCD</span><span class="p">()</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">temperature_value</span> <span class="o">=</span> <span class="n">thermistor</span><span class="o">.</span><span class="n">read_u16</span><span class="p">()</span>
    <span class="n">Vr</span> <span class="o">=</span> <span class="mf">3.3</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">temperature_value</span><span class="p">)</span> <span class="o">/</span> <span class="mi">65535</span>
    <span class="n">Rt</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">*</span> <span class="n">Vr</span> <span class="o">/</span> <span class="p">(</span><span class="mf">3.3</span> <span class="o">-</span> <span class="n">Vr</span><span class="p">)</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(((</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Rt</span> <span class="o">/</span> <span class="mi">10000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">3950</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mf">273.15</span><span class="o">+</span><span class="mi">25</span><span class="p">)))</span>
    <span class="n">Cel</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">-</span> <span class="mf">273.15</span>
    <span class="c1">#Fah = Cel * 1.8 + 32</span>
    <span class="c1">#print (&#39;Celsius: %.2f C  Fahrenheit: %.2f F&#39; % (Cel, Fah))</span>
    <span class="c1">#utime.sleep_ms(200)</span>

    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot; Temperature is </span><span class="se">\n</span><span class="s2">    &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Cel</span><span class="p">))</span><span class="o">+</span> <span class="s2">&quot; C&quot;</span>
    <span class="n">lcd</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">lcd</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="RGB LED Strip.html" class="btn btn-neutral float-right" title="RGB LED Strip" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="LED Segment Display.html" class="btn btn-neutral float-left" title="LED Segment Display" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>