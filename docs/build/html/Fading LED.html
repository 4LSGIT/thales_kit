

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Fading LED &mdash; SunFounder Thales Kit for Raspberry Pi Pico 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Colorful Light" href="Colorful%20Light.html" />
    <link rel="prev" title="Intruder Alarm" href="Intruder%20Alarm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SunFounder Thales Kit for Raspberry Pi Pico
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction%20to%20Raspberry%20Pi%20Pico.html">Introduction to Raspberry Pi Pico</a></li>
<li class="toctree-l1"><a class="reference internal" href="What%C2%A0is%C2%A0MicroPython.html">What is MicroPython?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Thonny%20Python%20IDE.html">Thonny Python IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="Your%20First%20MicroPython%20Program.html">Your First MicroPython Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="MicroPython%20Basic%20Syntax.html">MicroPython Basic Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="Components%20Introduction.html">Components Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Lesson.html">Lessons</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="First%20program%21%20Hello%2C%20LED%21.html">Hello, LED!</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello%2C%20Breadboard%21.html">Hello, Breadboard!</a></li>
<li class="toctree-l2"><a class="reference internal" href="reading_button_values.html">Reading Button Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reaction%20Game.html">Reaction Game</a></li>
<li class="toctree-l2"><a class="reference internal" href="Traffic%20light.html">Traffic Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hello%2C%20Transistor%21.html">Two Kinds of Transistors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Intruder%20Alarm.html">Intruder Alarm</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Fading LED</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wiring">Wiring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it works?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Colorful%20Light.html">Colorful Light</a></li>
<li class="toctree-l2"><a class="reference internal" href="Custom%20tone.html">Custom Tone</a></li>
<li class="toctree-l2"><a class="reference internal" href="Swinging%20Servo.html">Swinging Servo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Turn%20the%20knob.html">Turn the Knob</a></li>
<li class="toctree-l2"><a class="reference internal" href="Thermometer.html">Thermometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Light%20Theremin.html">Light Theremin</a></li>
<li class="toctree-l2"><a class="reference internal" href="Microchip%20-%2074HC595.html">Microchip - 74HC595</a></li>
<li class="toctree-l2"><a class="reference internal" href="LED%20Segment%20Display.html">LED Segment Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="Liquid%20Crystal%20Display.html">Liquid Crystal Display</a></li>
<li class="toctree-l2"><a class="reference internal" href="RGB%20LED%20Strip.html">RGB LED Strip</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="about_writing_c_c%2B%2B_in_pico.html">About Writing C/C++ codes on Raspberry Pi Pico</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SunFounder Thales Kit for Raspberry Pi Pico</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Lesson.html">Lessons</a> &raquo;</li>
        
      <li>Fading LED</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Fading LED.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fading-led">
<h1>Fading LED<a class="headerlink" href="#fading-led" title="Permalink to this headline">¶</a></h1>
<p>So far, we have used only two output signals: high level and low level (or called 1 &amp; 0, ON &amp; OFF), which is called digital output.
However, in actual use, many devices do not simply ON/OFF to work, for example, adjusting the speed of the motor, adjusting the brightness of the desk lamp, and so on.
In the past, a slider that can adjust the resistance was used to achieve this goal, but this is always unreliable and inefficient.
Therefore, Pulse width modulation (PWM) has emerged as a feasible solution to such complex problems.</p>
<p>A digital output composed of a high level and a low level is called a pulse. The pulse width of these pins can be adjusted by changing the ON/OFF speed.</p>
<p>Simply put, when we are in a short period (such as 20ms, most people’s visual retention time),
Let the LED turn on, turn off, and turn on again, we won’t see it has been turned off, but the brightness of the light will be slightly weaker.
During this period, the more time the LED is turned on, the higher the brightness of the LED.
In other words, in the cycle, the wider the pulse, the greater the “electric signal strength” output by the microcontroller.
This is how PWM controls LED brightness (or motor speed).</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Pulse-width_modulation">Pulse-width modulation - Wikipedia</a></p></li>
</ul>
<p>There are some points to pay attention to when Pico uses PWM. Let’s take a look at this picture.</p>
<img alt="_images/pin_pic.png" src="_images/pin_pic.png" />
<p>Each GPIO pin of Pico supports PWM, but it actually has a total of 16 independent PWM outputs (instead of 30), distributed between GP0 to GP15 on the left, and the PWM output of the right GPIO is equivalent to the left copy.</p>
<p>What we need to pay attention to is to avoid setting the same PWM channel for different purposes during programming. (For example, GP0 and GP16 are both PWM_0A)</p>
<p>After understanding this knowledge, let us try to achieve the effect of Fading LED.</p>
<div class="section" id="wiring">
<h2>Wiring<a class="headerlink" href="#wiring" title="Permalink to this headline">¶</a></h2>
<img alt="_images/wiring_fading_led.png" src="_images/wiring_fading_led.png" />
<ol class="arabic simple">
<li><p>Here we use the GP15 pin of the Pico board.</p></li>
<li><p>Connect one end (either end) of the 220 ohm resistor to GP15, and insert the other end into the free row of the breadboard.</p></li>
<li><p>Insert the anode lead of the LED into the same row as the end of the 220Ω resistor, and connect the cathode lead across the middle gap of the breadboard to the same row.</p></li>
<li><p>Connect the LED cathode to the negative power bus of the breadboard.</p></li>
<li><p>Connect the negative power bus to the GND pin of Pico.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The color ring of the 220 ohm resistor is red, red, black, black and brown.</p>
</div>
</div>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>The LED will gradually become brighter as the program runs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">utime</span>

<span class="n">led</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">PWM</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
<span class="n">led</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<span class="k">for</span> <span class="n">brightness</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">65535</span><span class="p">,</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">led</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">brightness</span><span class="p">)</span>
    <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">led</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-it-works">
<h2>How it works?<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Here, we change the brightness of the LED by changing the duty cycle of the GP15’s PWM output. Let’s take a look at these lines.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">utime</span>

<span class="hll"><span class="n">led</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">PWM</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
</span><span class="hll"><span class="n">led</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</span>
<span class="k">for</span> <span class="n">brightness</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">65535</span><span class="p">,</span><span class="mi">50</span><span class="p">):</span>
<span class="hll">    <span class="n">led</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">brightness</span><span class="p">)</span>
</span>    <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">led</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">led</span> <span class="pre">=</span> <span class="pre">machine.PWM(machine.Pin(15))</span></code> sets the GP15 pin as PWM output.</p></li>
<li><p>The line <code class="docutils literal notranslate"><span class="pre">led.freq(1000)</span></code> is used to set the PWM frequency, here it is set to 1000Hz, which means 1ms (1/1000) is a cycle. The PWM frequency can be adjusted, for example, the steering wheel needs to work at 50Hz, the passive buzzer can change the tone by changing the PWM frequency. However, there is no limit when using LEDs alone, we set it to 1000Hz.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">led.duty_u16()</span></code> line is used to set the duty cycle, which is a 16-bit interger(2^16=65536). When we assign a 0 to this function, the duty cycle is 0%, and each cycle has 0% of the time to output a high level, in other words, turn off all pulses. When the value is 65535, the duty cycle is 100%, that is, the complete pulse is turned on, and the result is equal to ‘1’ as a digital output. If it is 32768, it will turn on half a pulse, and the brightness of the LED will be half of that when it is fully turned on.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Colorful%20Light.html" class="btn btn-neutral float-right" title="Colorful Light" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Intruder%20Alarm.html" class="btn btn-neutral float-left" title="Intruder Alarm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>